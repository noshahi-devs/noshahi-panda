<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Full Flow Demo Setup | Noshahi Panda</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            font-family: 'Outfit', sans-serif;
            background: #f8fafc;
            min-height: 100vh;
            display: grid;
            place-items: center;
            padding: 20px;
        }

        .card-demo {
            background: #fff;
            border-radius: 20px;
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.12);
            max-width: 640px;
            width: 100%;
            padding: 28px;
        }
    </style>
</head>

<body>
    <div class="card-demo">
        <h3 class="fw-bold mb-3"><i class="fa-solid fa-route me-2 text-danger"></i>Full Flow Demo Setup</h3>
        <p class="text-muted mb-4">Creates one complete test flow: customer order -> seller prepares -> nearby rider
            accepts -> tracking.</p>
        <ul class="small mb-4">
            <li>Restaurant: <b>Papa Nana Restaurant</b> (Lahore)</li>
            <li>Customer: <b>Adeel</b></li>
            <li>Rider: <b>Abaid 455</b> (nearby, Lahore)</li>
            <li>Order status starts at <b>Preparing</b> in seller dashboard</li>
        </ul>
        <button class="btn btn-danger w-100 py-2 fw-bold" onclick="setupFlow()">
            Initialize Demo Flow
        </button>
    </div>

    <script>
        function setupFlow() {
            const restaurant = {
                id: 880001,
                name: "Papa Nana Restaurant",
                cuisine: "Fast Food",
                address: "Johar Town, Lahore",
                status: "Approved"
            };

            const sellerApp = {
                id: 880001,
                name: "Papa Nana Restaurant",
                owner: { firstName: "Papa", lastName: "Nana", email: "papanana@seller.com", city: "Lahore" },
                address: "Johar Town, Lahore",
                cuisine: "Fast Food",
                status: "Approved",
                password: "123456"
            };

            const rider = {
                id: 455001,
                name: "Abaid 455",
                email: "abaid455@rider.com",
                password: "123456",
                city: "Lahore",
                vehicle: "Motorbike",
                status: "Active",
                rating: "4.9",
                date: new Date().toLocaleDateString()
            };

            const customer = {
                firstName: "Adeel",
                lastName: "Ahmed",
                email: "adeel@demo.com",
                password: "123456"
            };

            const order = {
                id: 9901,
                restaurant: "Papa Nana Restaurant",
                resId: 880001,
                customer: "Adeel Ahmed",
                customerEmail: "adeel@demo.com",
                items: [{ name: "Chicken Burger", price: "Rs. 650" }],
                total: "Rs. 650",
                date: new Date().toLocaleString(),
                method: "cod",
                status: "Preparing",
                address: "Canal Road, Lahore",
                deliveryTime: 25
            };

            let restaurants = JSON.parse(localStorage.getItem('noshahi_all_restaurants') || '[]');
            restaurants = restaurants.filter(r => r.id !== restaurant.id);
            restaurants.push(restaurant);
            localStorage.setItem('noshahi_all_restaurants', JSON.stringify(restaurants));

            let apps = JSON.parse(localStorage.getItem('noshahi_seller_applications') || '[]');
            apps = apps.filter(a => a.id !== sellerApp.id);
            apps.push(sellerApp);
            localStorage.setItem('noshahi_seller_applications', JSON.stringify(apps));
            localStorage.setItem('noshahi_active_restaurant', JSON.stringify(sellerApp));

            let riders = JSON.parse(localStorage.getItem('noshahi_all_riders') || '[]');
            riders = riders.filter(r => r.id !== rider.id);
            riders.push(rider);
            localStorage.setItem('noshahi_all_riders', JSON.stringify(riders));

            let customers = JSON.parse(localStorage.getItem('noshahi_customers') || '[]');
            customers = customers.filter(c => c.email !== customer.email);
            customers.push(customer);
            localStorage.setItem('noshahi_customers', JSON.stringify(customers));

            let orders = JSON.parse(localStorage.getItem('noshahi_all_orders') || '[]');
            orders = orders.filter(o => o.id !== order.id);
            orders.unshift(order);
            localStorage.setItem('noshahi_all_orders', JSON.stringify(orders));
            localStorage.setItem('noshahi_active_order', JSON.stringify(order));

            window.location.href = 'seller-dashboard.html';
        }
    </script>
</body>

</html>
